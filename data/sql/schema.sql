CREATE TABLE content_object (id BIGINT UNIQUE AUTO_INCREMENT, pid BIGINT, publishstart DATE, publishend DATE, objecttype VARCHAR(255) NOT NULL, user_id BIGINT, content VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, address TEXT NOT NULL, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), email VARCHAR(255), ccpnumber VARCHAR(255), facebook VARCHAR(255), twitter VARCHAR(255), title VARCHAR(255) NOT NULL UNIQUE, fbcontentlink VARCHAR(255), fbimportdate VARCHAR(255), description TEXT NOT NULL, comment VARCHAR(255) NOT NULL, post_id BIGINT, album_id BIGINT, photo_id BIGINT UNIQUE, mix_id BIGINT, image VARCHAR(255) NOT NULL, imagethumb VARCHAR(255), imageheight BIGINT, imagewidth BIGINT, imagethumbwidth BIGINT, imagethumbheight BIGINT, artist_id BIGINT, website VARCHAR(255), myspace VARCHAR(255), contactinfo VARCHAR(255), audiourl VARCHAR(255) NOT NULL, start DATE NOT NULL, end DATE, eventlocation_id BIGINT, phone VARCHAR(255), mapurl VARCHAR(255), locationimage VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pid_idx (pid), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE album_photo (id BIGINT UNIQUE AUTO_INCREMENT, album_id BIGINT NOT NULL, photo_id BIGINT NOT NULL, INDEX album_id_idx (album_id), INDEX photo_id_idx (photo_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE artist_event (id BIGINT UNIQUE AUTO_INCREMENT, artist_id BIGINT NOT NULL, event_id BIGINT NOT NULL, INDEX artist_id_idx (artist_id), INDEX event_id_idx (event_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE content_object (id BIGINT UNIQUE AUTO_INCREMENT, pid BIGINT, publishstart DATE, publishend DATE, objecttype VARCHAR(255) NOT NULL, user_id BIGINT, content VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, address TEXT NOT NULL, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), email VARCHAR(255), ccpnumber VARCHAR(255), facebook VARCHAR(255), twitter VARCHAR(255), title VARCHAR(255) NOT NULL UNIQUE, fbcontentlink VARCHAR(255), fbimportdate VARCHAR(255), description TEXT NOT NULL, comment VARCHAR(255) NOT NULL, post_id BIGINT, album_id BIGINT, photo_id BIGINT UNIQUE, mix_id BIGINT, image VARCHAR(255) NOT NULL, imagethumb VARCHAR(255), imageheight BIGINT, imagewidth BIGINT, imagethumbwidth BIGINT, imagethumbheight BIGINT, artist_id BIGINT, website VARCHAR(255), myspace VARCHAR(255), contactinfo VARCHAR(255), audiourl VARCHAR(255) NOT NULL, start DATE NOT NULL, end DATE, eventlocation_id BIGINT, phone VARCHAR(255), mapurl VARCHAR(255), locationimage VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pid_idx (pid), INDEX user_id_idx (user_id), INDEX post_id_idx (post_id), INDEX album_id_idx (album_id), INDEX photo_id_idx (photo_id), INDEX mix_id_idx (mix_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE content_object (id BIGINT UNIQUE AUTO_INCREMENT, pid BIGINT, publishstart DATE, publishend DATE, objecttype VARCHAR(255) NOT NULL, user_id BIGINT, content VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, address TEXT NOT NULL, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), email VARCHAR(255), ccpnumber VARCHAR(255), facebook VARCHAR(255), twitter VARCHAR(255), title VARCHAR(255) NOT NULL UNIQUE, fbcontentlink VARCHAR(255), fbimportdate VARCHAR(255), description TEXT NOT NULL, comment VARCHAR(255) NOT NULL, post_id BIGINT, album_id BIGINT, photo_id BIGINT UNIQUE, mix_id BIGINT, image VARCHAR(255) NOT NULL, imagethumb VARCHAR(255), imageheight BIGINT, imagewidth BIGINT, imagethumbwidth BIGINT, imagethumbheight BIGINT, artist_id BIGINT, website VARCHAR(255), myspace VARCHAR(255), contactinfo VARCHAR(255), audiourl VARCHAR(255) NOT NULL, start DATE NOT NULL, end DATE, eventlocation_id BIGINT, phone VARCHAR(255), mapurl VARCHAR(255), locationimage VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX content_object_ObjectType_idx (objecttype), INDEX pid_idx (pid), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE edit_permission (id BIGINT UNIQUE AUTO_INCREMENT, contentobject_id BIGINT NOT NULL, usergroup_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX contentobject_id_idx (contentobject_id), INDEX usergroup_id_idx (usergroup_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE content_object (id BIGINT UNIQUE AUTO_INCREMENT, pid BIGINT, publishstart DATE, publishend DATE, objecttype VARCHAR(255) NOT NULL, user_id BIGINT, content VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, address TEXT NOT NULL, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), email VARCHAR(255), ccpnumber VARCHAR(255), facebook VARCHAR(255), twitter VARCHAR(255), title VARCHAR(255) NOT NULL UNIQUE, fbcontentlink VARCHAR(255), fbimportdate VARCHAR(255), description TEXT NOT NULL, comment VARCHAR(255) NOT NULL, post_id BIGINT, album_id BIGINT, photo_id BIGINT UNIQUE, mix_id BIGINT, image VARCHAR(255) NOT NULL, imagethumb VARCHAR(255), imageheight BIGINT, imagewidth BIGINT, imagethumbwidth BIGINT, imagethumbheight BIGINT, artist_id BIGINT, website VARCHAR(255), myspace VARCHAR(255), contactinfo VARCHAR(255), audiourl VARCHAR(255) NOT NULL, start DATE NOT NULL, end DATE, eventlocation_id BIGINT, phone VARCHAR(255), mapurl VARCHAR(255), locationimage VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pid_idx (pid), INDEX user_id_idx (user_id), INDEX photo_id_idx (photo_id), INDEX eventlocation_id_idx (eventlocation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE content_object (id BIGINT UNIQUE AUTO_INCREMENT, pid BIGINT, publishstart DATE, publishend DATE, objecttype VARCHAR(255) NOT NULL, user_id BIGINT, content VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, address TEXT NOT NULL, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), email VARCHAR(255), ccpnumber VARCHAR(255), facebook VARCHAR(255), twitter VARCHAR(255), title VARCHAR(255) NOT NULL UNIQUE, fbcontentlink VARCHAR(255), fbimportdate VARCHAR(255), description TEXT NOT NULL, comment VARCHAR(255) NOT NULL, post_id BIGINT, album_id BIGINT, photo_id BIGINT UNIQUE, mix_id BIGINT, image VARCHAR(255) NOT NULL, imagethumb VARCHAR(255), imageheight BIGINT, imagewidth BIGINT, imagethumbwidth BIGINT, imagethumbheight BIGINT, artist_id BIGINT, website VARCHAR(255), myspace VARCHAR(255), contactinfo VARCHAR(255), audiourl VARCHAR(255) NOT NULL, start DATE NOT NULL, end DATE, eventlocation_id BIGINT, phone VARCHAR(255), mapurl VARCHAR(255), locationimage VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pid_idx (pid), INDEX user_id_idx (user_id), INDEX artist_id_idx (artist_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE post_post_category (id BIGINT UNIQUE AUTO_INCREMENT, post_id BIGINT NOT NULL, postcategory_id BIGINT NOT NULL, INDEX post_id_idx (post_id), INDEX postcategory_id_idx (postcategory_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE ptk_user (id BIGINT UNIQUE AUTO_INCREMENT, username VARCHAR(255) NOT NULL UNIQUE, email VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(255), firstname VARCHAR(255), lastname VARCHAR(255), address TEXT, address2 TEXT, city VARCHAR(255), zip VARCHAR(255), country VARCHAR(255), isptkmember TINYINT(1) DEFAULT '0', image VARCHAR(255), website VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE subscription (id BIGINT UNIQUE AUTO_INCREMENT, date DATE, ammount FLOAT(18, 2) NOT NULL, user_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE track (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, artistname VARCHAR(255), starttime VARCHAR(255), comment VARCHAR(255), link VARCHAR(255), mix_id BIGINT, artist_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX mix_id_idx (mix_id), INDEX artist_id_idx (artist_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_group (name VARCHAR(255) UNIQUE, description TEXT, id BIGINT UNIQUE AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_user_group (id BIGINT UNIQUE AUTO_INCREMENT, user_id BIGINT NOT NULL, usergroup_id BIGINT NOT NULL, INDEX user_id_idx (user_id), INDEX usergroup_id_idx (usergroup_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE visibility_restriction (id BIGINT UNIQUE AUTO_INCREMENT, contentobject_id BIGINT NOT NULL, usergroup_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX contentobject_id_idx (contentobject_id), INDEX usergroup_id_idx (usergroup_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE content_object ADD CONSTRAINT content_object_user_id_ptk_user_id FOREIGN KEY (user_id) REFERENCES ptk_user(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_pid_content_object_id FOREIGN KEY (pid) REFERENCES content_object(id);
ALTER TABLE album_photo ADD CONSTRAINT album_photo_photo_id_content_object_id FOREIGN KEY (photo_id) REFERENCES content_object(id);
ALTER TABLE album_photo ADD CONSTRAINT album_photo_album_id_content_object_id FOREIGN KEY (album_id) REFERENCES content_object(id);
ALTER TABLE artist_event ADD CONSTRAINT artist_event_event_id_content_object_id FOREIGN KEY (event_id) REFERENCES content_object(id);
ALTER TABLE artist_event ADD CONSTRAINT artist_event_artist_id_content_object_id FOREIGN KEY (artist_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_post_id_content_object_id FOREIGN KEY (post_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_photo_id_content_object_id FOREIGN KEY (photo_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_mix_id_content_object_id FOREIGN KEY (mix_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_album_id_content_object_id FOREIGN KEY (album_id) REFERENCES content_object(id);
ALTER TABLE edit_permission ADD CONSTRAINT edit_permission_usergroup_id_user_group_id FOREIGN KEY (usergroup_id) REFERENCES user_group(id);
ALTER TABLE edit_permission ADD CONSTRAINT edit_permission_contentobject_id_content_object_id FOREIGN KEY (contentobject_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_eventlocation_id_content_object_id FOREIGN KEY (eventlocation_id) REFERENCES content_object(id);
ALTER TABLE content_object ADD CONSTRAINT content_object_artist_id_content_object_id FOREIGN KEY (artist_id) REFERENCES content_object(id);
ALTER TABLE post_post_category ADD CONSTRAINT post_post_category_postcategory_id_content_object_id FOREIGN KEY (postcategory_id) REFERENCES content_object(id);
ALTER TABLE post_post_category ADD CONSTRAINT post_post_category_post_id_content_object_id FOREIGN KEY (post_id) REFERENCES content_object(id);
ALTER TABLE subscription ADD CONSTRAINT subscription_user_id_ptk_user_id FOREIGN KEY (user_id) REFERENCES ptk_user(id);
ALTER TABLE track ADD CONSTRAINT track_mix_id_content_object_id FOREIGN KEY (mix_id) REFERENCES content_object(id);
ALTER TABLE track ADD CONSTRAINT track_artist_id_content_object_id FOREIGN KEY (artist_id) REFERENCES content_object(id);
ALTER TABLE user_user_group ADD CONSTRAINT user_user_group_usergroup_id_user_group_id FOREIGN KEY (usergroup_id) REFERENCES user_group(id);
ALTER TABLE user_user_group ADD CONSTRAINT user_user_group_user_id_ptk_user_id FOREIGN KEY (user_id) REFERENCES ptk_user(id);
ALTER TABLE visibility_restriction ADD CONSTRAINT visibility_restriction_usergroup_id_user_group_id FOREIGN KEY (usergroup_id) REFERENCES user_group(id);
ALTER TABLE visibility_restriction ADD CONSTRAINT visibility_restriction_contentobject_id_content_object_id FOREIGN KEY (contentobject_id) REFERENCES content_object(id);
